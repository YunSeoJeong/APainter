# APainter 개발 계획 (할 일 목록)

## 1. 프로젝트 개요

*   **프로젝트 이름:** APainter
*   **목표:** 그림 입문자를 위한 쉽고 빠른 그림 그리기 환경 제공, ComfyUI 연동을 통한 AI 이미지 생성 기능 지원
*   **대상 사용자:** 그림 입문자
*   **주요 기능:** 그림 그리기, 편집, 레이어, ComfyUI 연동

## 2. 개발 목표

*   MVP 패턴 기반 아키텍처 구현
*   SOLID 원칙 준수
*   핵심 기능 구현 (그림 그리기, 편집, 레이어, ComfyUI 연동)
*   직관적이고 사용하기 쉬운 UI 디자인

## 3. 할 일 목록

### 3.1. MVP 아키텍처 구현 (우선순위: 높음)

*   [x] Model, View, Presenter 인터페이스 정의
*   [ ] 각 기능별 Model 클래스 구현 (BitmapModel, ComfyUIModel, FileModel)
*   [ ] 각 기능별 View 인터페이스 및 클래스 구현 (MainForm, ToolboxView, CanvasView, LayerManagerView, MenuView)
*   [ ] 컴포넌트 간 관계 설정 및 데이터 흐름 정의

### 3.2. 그림 그리기 기능 구현 (우선순위: 높음)

*   [ ] 붓, 연필, 스프레이 도구 구현
*   [ ] 색상 팔레트 및 스포이드 기능 구현
*   [ ] 마우스 이벤트 처리 (MouseDown, MouseMove, MouseUp)
*   [ ] Graphics 객체를 사용하여 그림 그리기

### 3.3. 편집 기능 구현 (우선순위: 중간)

*   [ ] 자르기, 복사, 붙여넣기, 회전 기능 구현
*   [ ] 픽셀 유동화 기능 구현
*   [ ] 올가미 기능 구현

### 3.4. 레이어 기능 구현 (우선순위: 높음)

*   [ ] 레이어 추가, 삭제, 복사, 병합 기능 구현
*   [ ] 레이어 투명도 조절 기능 구현
*   [ ] 레이어 순서 변경 기능 구현

### 3.5. ComfyUI 연동 (우선순위: 중간)

*   [ ] ComfyUI API 연동
*   [ ] 이미지 생성 및 레이어 연동 기능 구현
*   [ ] 낮은 GPU 사용량을 위한 API 호출 빈도 조절

### 3.6. UI 디자인 (우선순위: 높음)

*   [ ] UI 레이아웃 설계 (도구 상자, 그림 영역, 레이어 관리, 메뉴)
*   [ ] UI 스타일 (모던, 모노톤) 및 아이콘 스타일 (아웃라인) 정의
*   [ ] 다크 모드 지원
*   [ ] 다양한 해상도 지원 (1K-4K)
*   [ ] 스타일러스 필압 기능 지원

### 3.7. 테스트 (우선순위: 높음)

*   [ ] 단위 테스트 (Presenter)
*   [ ] 통합 테스트 (Model, View, Presenter)
*   [ ] UI 테스트 (사용자 시나리오 기반)

## 4. 팀 구성

*   **PM:** (미정)
*   **개발자:** (미정)
*   **UI 디자이너:** (미정)
*   **테스터:** (미정)

## 5. 기술 스택

*   C#
*   WinForms
*   ComfyUI API

## 6. 위험 관리

| 위험 요소           | 대응 방안                                  |
| ----------------- | ----------------------------------------- |
| ComfyUI API 변경   | API 변경 사항에 대한 모니터링 및 코드 수정 |
| UI 디자인 문제      | UI 디자이너와 협업하여 문제 해결             |
| 성능 문제 (GPU 사용량) | ComfyUI API 호출 빈도 조절 및 최적화           |

## 7. ComfyUI 연동 상세 계획

*   **API 엔드포인트:**
    *   이미지 생성: `/prompt`
    *   이미지 정보: `/history`
    *   워크플로우: `/workflow`
*   **데이터 전송 방식:** JSON
*   **기능 구현:**
    *   ComfyUI API를 사용하여 이미지 생성 및 레이어 연동 기능 구현
    *   낮은 GPU 사용량을 위한 API 호출 빈도 조절 방안

## 8. 파일 저장/불러오기 상세 계획

*   **파일 형식:** .apainter (고유한 파일 형식)
*   **파일 구조:** (미정)
*   **기능 구현:**
    *   파일 저장 및 불러오기 기능 구현

## 9. UI 디자인 상세 계획

*   **UI 스타일:** 모던, 모노톤
*   **아이콘 스타일:** 아웃라인
*   **UI 레이아웃:**
    *   도구 상자 (좌측)
    *   그림 영역 (중앙)
    *   레이어 관리 (우측 팝업)
    *   메뉴 (상단)
*   **기타:**
    *   다크 모드 지원
    *   다양한 해상도 지원 (1K-4K)
    *   스타일러스 필압 기능 지원